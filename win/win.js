let winAula = document.querySelectorAll('.win-aula');
let winAtv = document.querySelectorAll('.win-atv');
let winAvaliacao = document.querySelectorAll('.win-avaliacao');

export const winDetails = {
    videoLink: [
        '../videos/win/aula6/aula6.mp4',
        '../videos/win/aula7/aula7.mp4',
        '../videos/win/aula8/aula8.mp4',
        //'../videos/win/aula9/aula9.mp4',
        //'../videos/win/aula10/aula10.mp4',
        //'../videos/win/aula11/aula11.mp4',
        //'../videos/win/aula12/aula12.mp4',
        //'../videos/win/aula13/aula13.mp4',
        //'../videos/win/aula14/aula14.mp4',
        //'../videos/win/aula15/aula15.mp4',
        //'../videos/win/aula16/aula16.mp4'
    ],
    pratica: [
        [
            '../videos/win/aula6/aula6/1.png',
            '../videos/win/aula6/aula6/2.png',
            '../videos/win/aula6/aula6/3.png',
            '../videos/win/aula6/aula6/4.png',
            '../videos/win/aula6/aula6/5.png',
            '../videos/win/aula6/aula6/6.png',
            '../videos/win/aula6/aula6/7.png',
            '../videos/win/aula6/aula6/8.png',
            '../videos/win/aula6/aula6/9.png',
            '../videos/win/aula6/aula6/10.png',
            '../videos/win/aula6/aula6/11.png',
            '../videos/win/aula6/aula6/12.png',
            '../videos/win/aula6/aula6/13.png',
            '../videos/win/aula6/aula6/14.png',
            '../videos/win/aula6/aula6/15.png',
            '../videos/win/aula6/aula6/16.png'
        ],
        [
            '../videos/win/aula7/aula7/1.png',
            '../videos/win/aula7/aula7/2.png',
            '../videos/win/aula7/aula7/3.png',
            '../videos/win/aula7/aula7/4.png',
            '../videos/win/aula7/aula7/5.png',
            '../videos/win/aula7/aula7/6.png',
            '../videos/win/aula7/aula7/7.png',
            '../videos/win/aula7/aula7/8.png',
            '../videos/win/aula7/aula7/9.png',
            '../videos/win/aula7/aula7/10.png',
            '../videos/win/aula7/aula7/11.png',
            '../videos/win/aula7/aula7/12.png',
            '../videos/win/aula7/aula7/13.png',
            '../videos/win/aula7/aula7/14.png',
            '../videos/win/aula7/aula7/15.png',
            '../videos/win/aula7/aula7/16.png',
            '../videos/win/aula7/aula7/17.png',
            '../videos/win/aula7/aula7/18.png',
            '../videos/win/aula7/aula7/19.png',
            '../videos/win/aula7/aula7/20.png',
            '../videos/win/aula7/aula7/21.png',
            '../videos/win/aula7/aula7/22.png',
            '../videos/win/aula7/aula7/23.png'
        ],
        [
            '../videos/win/aula8/aula8/1.png',
            '../videos/win/aula8/aula8/2.png',
            '../videos/win/aula8/aula8/3.png',
            '../videos/win/aula8/aula8/4.png',
            '../videos/win/aula8/aula8/5.png',
            '../videos/win/aula8/aula8/6.png',
            '../videos/win/aula8/aula8/7.png',
            '../videos/win/aula8/aula8/8.png',
            '../videos/win/aula8/aula8/9.png',
            '../videos/win/aula8/aula8/10.png',
            '../videos/win/aula8/aula8/11.png',
            '../videos/win/aula8/aula8/12.png',
            '../videos/win/aula8/aula8/13.png',
            '../videos/win/aula8/aula8/14.png',
            '../videos/win/aula8/aula8/15.png',
            '../videos/win/aula8/aula8/16.png',
            '../videos/win/aula8/aula8/17.png',
            '../videos/win/aula8/aula8/18.png',
            '../videos/win/aula8/aula8/19.png',
            '../videos/win/aula8/aula8/20.png',
            '../videos/win/aula8/aula8/21.png',
            '../videos/win/aula8/aula8/22.png',
            '../videos/win/aula8/aula8/23.png',
            '../videos/win/aula8/aula8/24.png',
            '../videos/win/aula8/aula8/25.png',
            '../videos/win/aula8/aula8/26.png',
            '../videos/win/aula8/aula8/27.png',
            '../videos/win/aula8/aula8/28.png',
            '../videos/win/aula8/aula8/29.png',
            '../videos/win/aula8/aula8/30.png',
            '../videos/win/aula8/aula8/31.png',
            '../videos/win/aula8/aula8/32.png',
            '../videos/win/aula8/aula8/33.png',
            '../videos/win/aula8/aula8/34.png',
            '../videos/win/aula8/aula8/35.png',
            '../videos/win/aula8/aula8/36.png',
            '../videos/win/aula8/aula8/37.png',
            '../videos/win/aula8/aula8/38.png',
            '../videos/win/aula8/aula8/39.png',
            '../videos/win/aula8/aula8/40.png',
            '../videos/win/aula8/aula8/41.png',
            '../videos/win/aula8/aula8/42.png',
            '../videos/win/aula8/aula8/43.png',
            '../videos/win/aula8/aula8/44.png',
            '../videos/win/aula8/aula8/45.png',
            '../videos/win/aula8/aula8/46.png',
            '../videos/win/aula8/aula8/47.png',
            '../videos/win/aula8/aula8/48.png',
            '../videos/win/aula8/aula8/49.png',
            '../videos/win/aula8/aula8/50.png',
            '../videos/win/aula8/aula8/51.png',
            '../videos/win/aula8/aula8/52.png',
            '../videos/win/aula8/aula8/53.png',
            '../videos/win/aula8/aula8/54.png',
            '../videos/win/aula8/aula8/55.png'
        ],
        [
            '../videos/win/aula9/aula9/1.png',
            '../videos/win/aula9/aula9/2.png',
            '../videos/win/aula9/aula9/3.png',
            '../videos/win/aula9/aula9/4.png',
            '../videos/win/aula9/aula9/5.png',
            '../videos/win/aula9/aula9/6.png',
            '../videos/win/aula9/aula9/7.png',
            '../videos/win/aula9/aula9/8.png',
            '../videos/win/aula9/aula9/9.png',
            '../videos/win/aula9/aula9/10.png',
            '../videos/win/aula9/aula9/11.png',
            '../videos/win/aula9/aula9/12.png',
            '../videos/win/aula9/aula9/13.png',
            '../videos/win/aula9/aula9/14.png',
            '../videos/win/aula9/aula9/15.png',
            '../videos/win/aula9/aula9/16.png',
            '../videos/win/aula9/aula9/17.png',
            '../videos/win/aula9/aula9/18.png',
            '../videos/win/aula9/aula9/19.png',
            '../videos/win/aula9/aula9/20.png',
            '../videos/win/aula9/aula9/21.png',
            '../videos/win/aula9/aula9/22.png',
            '../videos/win/aula9/aula9/23.png',
            '../videos/win/aula9/aula9/24.png',
            '../videos/win/aula9/aula9/25.png',
            '../videos/win/aula9/aula9/26.png',
            '../videos/win/aula9/aula9/27.png',
            '../videos/win/aula9/aula9/28.png'
        ],
        [
            '../videos/intro/aula10/aula10/1.png',
        ],
        [
            '../videos/intro/aula11/aula11/1.png',
        ],
        [
            '../videos/intro/aula12/aula12/1.png',
        ],
        [
            '../videos/intro/aula13/aula13/1.png',
        ],
        [
            '../videos/intro/aula14/aula14/1.png',
        ],
        [
            '../videos/intro/aula15/aula15/1.png',
        ],
        [
            '../videos/intro/aula16/aula16/1.png',
        ]
    ]

};

// Função para abrir o vídeo em uma nova janela
function abrirVideo(index) {
    const videoUrl = winDetails.videoLink[index];

    // Código HTML para a nova janela com controles personalizados
    const videoHtml = `
        <html>
        <head>
            <title>VideoAula</title>
            <!-- Link para o Font Awesome -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
            <style>
                * {
                    transition: all 250ms;
                }

                body {
                    font-family: 'Poppins', sans-serif;
                    margin: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    background-color: black;
                }

                .btnControl {
                    width: 80px;
                    height: 40px;
                    background-color: #252e3d;
                    opacity: 0.8;
                    border-radius: 5px;
                    border-style: none;
                    color: #fff;
                    cursor: pointer;
                    font-size: 20px; /* Tamanho maior para o ícone */
                }

                .btnControl:hover {
                    background-color: #25344D;
                    opacity: 1;
                }

                /* Barra de progresso e exibição de tempo lado a lado */
                .progressWrapper {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    width: 600px; /* Largura ajustada */
                }

                .progressContainer {
                    width: 50%; /* Ajustando o tamanho da barra */
                    height: 5px;
                    background-color: rgba(255, 255, 255, 0.3); /* Leve opacidade */
                    cursor: none; /* Inicialmente não manipulável */
                }

                .progressBar {
                    height: 100%;
                    width: 0;
                    background-color: #4CAF50; /* Cor da barra */
                    opacity: 0.7; /* Opacidade da barra */
                }

                /* Exibição de tempo */
                .timeDisplay {
                    color: white;
                    font-size: 16px;
                    margin-left: 10px; /* Espaço entre a barra e o tempo */
                }

                .controlWrapper {
                    display: flex;
                    justify-content: center;
                    flex-direction: column;
                    align-items: center;
                    gap: 10px;
                    margin-bottom: 10px;
                }

                .aulaControls {
                    display: flex;
                    align-items: center;
                    position: relative; /* Necessário para posicionar a notificação em relação a este contêiner */
                }

                .toast {
                    background-color: rgba(0, 0, 0, 0.7);
                    color: white;
                    padding: 10px;
                    border-radius: 5px;
                    font-size: 16px;
                    opacity: 1;
                    transition: opacity 0.5s ease-in-out;
                    z-index: 10;
                    display: inline-block;
                    position: absolute;
                    bottom: 70px;
                    width: 250px;
                }

                .toast::after {
                    content: "";
                    position: absolute;
                    top: 100%;
                    left: 50%;
                    transform: translateX(-50%);
                    border-width: 10px;
                    border-style: solid;
                    border-color: rgba(0, 0, 0, 0.7) transparent transparent transparent;
                }

            </style>
        </head>
        <body>
            <video id="videoPlayer" width="100%" height="auto">
                <source src="${videoUrl}" type="video/mp4">
                Seu navegador não suporta vídeos.
            </video>
            <div class="aulaControls" style="position: absolute; bottom: 10px; text-align: center;">
                <!-- Contêiner para o botão de controle -->
                <div class="controlWrapper">
                
                <!-- Toast Notification -->
                <div id="toast" class="toast">Clique aqui para iniciar a aula</div>    
                
                <button class="btnControl" id="controlBtn" onclick="togglePlayPause()">
                        <i class="fas fa-play"></i> <!-- Ícone de play -->
                    </button>
                </div>
                
                <!-- Barra de progresso e tempo -->
                <div class="progressWrapper">
                    <!-- Barra de progresso -->
                    <div class="progressContainer" id="progressContainer">
                        <div class="progressBar" id="progressBar"></div>
                    </div>
                    <!-- Exibição de tempo -->
                    <div class="timeDisplay" id="timeDisplay">00:00 / 00:00</div>
                </div>
            </div>

            <script>
                // Função para alternar entre play e pause
                function togglePlayPause() {
                    const videoPlayer = document.getElementById('videoPlayer');
                    const controlBtn = document.getElementById('controlBtn');
                    const icon = controlBtn.querySelector('i');

                    if (videoPlayer.paused) {
                        videoPlayer.play();
                        icon.classList.remove('fa-play');
                        icon.classList.add('fa-pause'); // Troca para ícone de pausa
                    } else {
                        videoPlayer.pause();
                        icon.classList.remove('fa-pause');
                        icon.classList.add('fa-play'); // Troca para ícone de play
                    }
                }

                // Função para garantir que o tempo esteja sempre no formato 2 dígitos
                function padTime(time) {
                    return time < 10 ? '0' + time : time;
                }

                // Atualiza a barra de progresso e exibe o tempo
                const videoPlayer = document.getElementById('videoPlayer');
                const progressBar = document.getElementById('progressBar');
                const timeDisplay = document.getElementById('timeDisplay');
                const progressContainer = document.getElementById('progressContainer');

                videoPlayer.addEventListener('timeupdate', function() {
                    const currentTime = videoPlayer.currentTime;
                    const duration = videoPlayer.duration;
                    const progress = (currentTime / duration) * 100;

                    progressBar.style.width = progress + '%'; // Atualiza a largura da barra

                    // Exibe o tempo atual e total em minutos:segundos
                    const currentMinutes = Math.floor(currentTime / 60);
                    const currentSeconds = Math.floor(currentTime % 60);
                    const durationMinutes = Math.floor(duration / 60);
                    const durationSeconds = Math.floor(duration % 60);

                    const formattedCurrentTime = padTime(currentMinutes) + ':' + padTime(currentSeconds);
                    const formattedDuration = padTime(durationMinutes) + ':' + padTime(durationSeconds);

                    timeDisplay.textContent = formattedCurrentTime + ' / ' + formattedDuration;
                });

                // Função para permitir que a barra de progresso seja manipulada
                progressContainer.addEventListener('click', function(event) {
                    if (isControlEnabled) {
                        const progressWidth = progressContainer.clientWidth;
                        const clickPosition = event.offsetX;
                        const newTime = (clickPosition / progressWidth) * videoPlayer.duration;
                        videoPlayer.currentTime = newTime;
                    }
                });

                // Variável para habilitar/desabilitar a interação com a barra de progresso
                let isControlEnabled = false;

                // Função para ativar/desativar a manipulação da barra de progresso
                function enableProgressControl() {
                    isControlEnabled = !isControlEnabled;
                    if (isControlEnabled) {
                        progressContainer.style.cursor = 'pointer'; // Torna a barra manipulável
                    } else {
                        progressContainer.style.cursor = 'none'; // Desabilita a manipulação
                    }
                }

                // Detecta a combinação de teclas CTRL + SHIFT + F12
                window.addEventListener('keydown', function(event) {
                    if (event.ctrlKey && event.shiftKey && event.key === 'F12') {
                        enableProgressControl();
                    }
                });

                // Função para ocultar o toast após 5 segundos
                setTimeout(function() {
                    const toast = document.getElementById('toast');
                    toast.style.opacity = '0'; // Torna o toast invisível
                    setTimeout(function() {
                        toast.style.display = 'none'; // Remove o toast da tela
                    }, 500); // Aguarda 0.5s para a animação de opacidade terminar
                }, 5000); // Exibe o toast por 5 segundos
            </script>
        </body>
        </html>
    `;

    // Abrir nova janela e escrever o conteúdo HTML
    const videoWindow = window.open("", "VideoAula", "width=900,height=500");
    videoWindow.document.write(videoHtml);
    videoWindow.document.close(); // Garante que o conteúdo é renderizado corretamente
}

// Função para exibir o slide de imagens em uma janela externa
function exibirSlide(index) {
    const imagens = winDetails.pratica[index];
    let currentImageIndex = 0;

    // Criando o conteúdo do slide
    const slideContent = `
        <html>
            <head>
            <style>
                *{
                    transition: all 250ms;
                }
                
                body{
                    background-color: #ebebeb;
                }
            
                .btnVoltar{
                    position: absolute;
                    bottom: 50%;
                    left: 20px;
                }
                
                .btnAvancar{
                    position: absolute;
                    bottom: 50%;
                    right: 20px;
                }

                .btnAvancar,
                .btnVoltar{
                    background-color: #252e3d;
                    color: #fff;
                    width: 30px;
                    height: 30px;
                    padding: 40px;
                    border-radius: 40px;
                    border-style: none;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    box-shadow: 1px 0px 5px #000;
                    font-weight: 700;
                    font-size: 1.5em;
                }
                    
                .btnAvancar:hover,
                .btnVoltar:hover{
                    background-color: #25344D;
                    scale: 0.9;
                }

                .imgSlide{
                    border-radius: 20px;
                    clip-path: polygon(5% 5%, 95% 5%, 95% 95%, 5% 95%);
                }

            </style>
            </head>
            <body>
                <div style="text-align:center; padding:20px;">
                    <img class="imgSlide" src="${imagens[currentImageIndex]}" style="max-width:100%; max-height:600px; border: 1px solid #000;">
                    <div style="margin-top:20px;">
                        <button class="btnVoltar" onclick="alterarImagem(-1)" ><</button>
                        <button class="btnAvancar" onclick="alterarImagem(1)" >></button>
                    </div>
                </div>
            </body>
            <script>
                var imagens = ${JSON.stringify(imagens)};
                var currentImageIndex = 0;
                function alterarImagem(direcao) {
                    currentImageIndex += direcao;
                    if (currentImageIndex < 0) currentImageIndex = 0;
                    if (currentImageIndex >= imagens.length) currentImageIndex = imagens.length - 1;
                    document.querySelector('img').src = imagens[currentImageIndex];
                }
            </script>
        </html>
    `;

    // Abrindo o slide em uma nova janela
    const slideWindow = window.open("", "SlidePratica", "width=800,height=600");
    slideWindow.document.write(slideContent);
}

// Adicionando os eventos aos elementos
winAula.forEach((item, index) => {
    item.addEventListener('click', () => {
        abrirVideo(index);
    });
});

winAtv.forEach((item, index) => {
    item.addEventListener('click', () => {
        exibirSlide(index);
    });
});

document.querySelectorAll(".btnAcessar").forEach((btn, index) => {
    btn.addEventListener("click", () => {
        const cursoDetails = document.querySelectorAll(".cursoDetails")[index];

        // Adiciona ou remove a classe 'open' para animar
        if (cursoDetails.classList.contains("open")) {
            cursoDetails.classList.remove("open");

            // Para evitar problemas de layout ao usar 'display: none'
            setTimeout(() => {
                cursoDetails.style.display = "none";
            }, 300); // Tempo igual ao do transition no CSS
        } else {
            cursoDetails.style.display = "block";
            setTimeout(() => {
                cursoDetails.classList.add("open");
            }, 10); // Pequeno delay para a transição funcionar corretamente
        }
    });
});

// Lista de questões para cada avaliação (8 questões cada)
const avaliacoes = [

    //avaliação aula 6------------------------------------------------------------------------------
    [
        {
            numero: 1,
            enunciado: "O Painel de Controle apresenta diversas funções de configurações de aplicativos. Assim, qual a melhor definição para Painel de Controle?",
            alternativas: [
                "A) Localizador dos ícones",
                "B) Interface gráfica",
                "C) Menu inicial",
                "D) Instalador de programas"
            ],
            correta: "B",
            feedback: "A resposta está correta, pois um Painel de Controle é uma interface gráfica que agrupa um conjunto de ícones e aplicativos."
        },
        {
            numero: 2,
            enunciado: "O Painel de Controle é uma importante ferramenta no que concerne à apresentação e à edição de alguns aspectos. Nesse sentido, qual é a principal função do Painel de Controle?",
            alternativas: [
                "A) Apresentar gráficos",
                "B) Configurar o sistema operacional",
                "C) Ordenar ícones",
                "D) Resumir o menu iniciar"
            ],
            correta: "B",
            feedback: "A resposta está correta, pois o Painel de Controle agrupa um conjunto de ícones e aplicativos que são capazes de configurar o sistema operacional do computador."
        },
        {
            numero: 3,
            enunciado: "O painel de controle é uma interface gráfica, que agrupa um conjunto de recursos capazes de configurar o sistema operacional do computador. Diante desta afirmação destacamos os inúmeros benefícios de uma boa configuração, o que traz _______ para a utilização do computador. Assinale a alternativa que completa a lacuna da frase:",
            alternativas: [
                "A) Alguns aplicativos",
                "B) Somente benefícios de backup",
                "C) Praticidade e agilidade",
                "D) Barreiras para vírus"
            ],
            correta: "C",
            feedback: "A resposta está correta, pois são inúmeros os benefícios de uma configuração bem realizada utilizando os recursos do painel de controle, inclusive o de deixar o computador mais rápido e prático para que os usuários o utilizem."
        },
        {
            numero: 4,
            enunciado: "O Painel de Controle apresenta diversas funções, como a configuração de 'Hardware e Sons' e 'Contas de Usuário'. Pensando nisso, assinale uma função que NÃO pode ser configurada através dele.",
            alternativas: [
                "A) Planos de fundo",
                "B) Hardware",
                "C) Extensão de arquivos",
                "D) Dispositivos de impressora"
            ],
            correta: "C",
            feedback: "A resposta está correta, pois a extensão de arquivos só pode ser alterada no gerenciador de arquivos ou em 'Propriedades', e não pelo Painel de Controle."
        },
        {
            numero: 5,
            enunciado: "O Painel de Controle tem configurações técnicas do sistema operacional e influencia também em outros âmbitos. Acerca deles, assinale a alternativa que NÃO representa uma dessas possibilidades de influência.",
            alternativas: [
                "A) Organização",
                "B) Gerenciador de Tarefas",
                "C) Layout",
                "D) Segurança"
            ],
            correta: "B",
            feedback: "A resposta está correta, pois além das configurações padrões, o computador acaba interferindo na parte da organização, praticidade, layout e segurança."
        },
        {
            numero: 6,
            enunciado: "Para que as mais diversas configurações sejam realizadas no Painel de Controle do Windows 11, existem comandos específicos dispostos na tela inicial do Painel de Controle. Assinale a alternativa que NÃO apresenta um deles.",
            alternativas: [
                "A) Programas",
                "B) Rede e Internet",
                "C) Sistema e Segurança",
                "D) Layout"
            ],
            correta: "D",
            feedback: "A resposta está correta, pois a tela inicial do aplicativo apresenta as seguintes funções: 'Sistema e Segurança', 'Rede e Internet', 'Hardware e Sons', 'Programas', 'Contas de Usuário', 'Aparência e Personalização', 'Relógio e Região' e 'Facilidade de Acesso'. O layout pode ser alterado a partir de um desses comandos, mas não é um comando disposto na tela inicial."
        },
        {
            numero: 7,
            enunciado: "Existem passos específicos para acessar o Painel de Controle de forma rápida. Quais são eles?",
            alternativas: [
                "A) Menu Iniciar – Abrir",
                "B) Menu Iniciar – Galeria de aplicativos – Painel de Controle – Abrir",
                "C) Painel de Controles – Abrir",
                "D) Menu Iniciar – Pesquisar 'Painel de Controle' – Abrir"
            ],
            correta: "D",
            feedback: "A resposta está correta, pois o Painel de Controle é encontrado na barra de pesquisa do menu iniciar."
        },
        {
            numero: 8,
            enunciado: "Todas as opções de configuração do comando de 'Sistema e Segurança' têm um objetivo em comum. Qual é esse objetivo?",
            alternativas: [
                "A) Garantir segurança",
                "B) Manter o bom funcionamento do computador",
                "C) Impedir e prevenir a entrada de vírus",
                "D) Permitir controle de acesso"
            ],
            correta: "B",
            feedback: "A resposta está correta, pois todas as opções dessas abas envolvem configurações fundamentais para um bom funcionamento do computador."
        }
    ],

    //avaliação aula 7------------------------------------------------------------------------------
    [
        {
            numero: 1,
            enunciado: "Ao longo da utilização do computador equipado com o Windows, o usuário percebe a necessidade de outros softwares para a realização de suas tarefas. Geralmente, qual é o próximo passo do usuário?",
            alternativas: [
                "A) Instalar os softwares necessários",
                "B) Configurar os softwares",
                "C) Configurar a parte visual",
                "D) Desligar a máquina"
            ],
            correta: "A",
            feedback: "A resposta está correta, pois normalmente quando você inicia a utilização de um computador, os softwares devem ser instalados conforme sua necessidade."
        },
        {
            numero: 2,
            enunciado: "Ao fazer o download de um programa para instalação, é baixado um arquivo do servidor do programa, esse arquivo tem um formato específico. Qual o formato desse arquivo?",
            alternativas: [
                "A) .xml",
                "B) .exe",
                "C) .bitmap",
                "D) .doc"
            ],
            correta: "B",
            feedback: "A resposta está correta, pois, para a instalação de qualquer programa, é necessário que o arquivo seja baixado no formato Exe."
        },
        {
            numero: 3,
            enunciado: "Ao clicar em 'Executar' durante a instalação de um programa, o sistema pergunta se 'Você realmente deseja alterar as configurações desse computador?'. Assinale a alternativa que NÃO representa uma possibilidade de configuração que um software pode fazer no computador.",
            alternativas: [
                "A) O programa pode interferir na segurança",
                "B) O programa pode interferir no sistema operacional",
                "C) O programa pode interferir no layout",
                "D) O programa pode alterar as configurações"
            ],
            correta: "C",
            feedback: "A resposta está correta, pois os programas normalmente não interferem no layout do sistema, e mesmo que interferissem, não é um fato significativo ou relevante."
        },
        {
            numero: 4,
            enunciado: "Entre as configurações possíveis no Windows, temos a possibilidade de transformar um aplicativo comum em padrão. Os aplicativos precisam estar instalados para que possam ser definidos como padrão. Dentre as alternativas a seguir, qual define um caminho válido para configurar um aplicativo como padrão?",
            alternativas: [
                "A) Clique com o botão direito sobre a barra de tarefas e depois escolha personalizar",
                "B) Clique no menu Iniciar > Configurações > Aplicativos > Aplicativos padrão",
                "C) Clique no menu Iniciar > Configurações > Acessibilidade",
                "D) Clique em configurações > Sistemas > Sistema padrão"
            ],
            correta: "B",
            feedback: "A resposta está correta, pois, por meio do painel configurações e aplicativos é possível configurar os aplicativos que serão padrão para cada segmento no sistema operacional."
        },
        {
            numero: 5,
            enunciado: "Além de instalar e configurar softwares, é possível desinstalar softwares do computador, caso seja necessário. Por que desinstalar um software que não está mais sendo utilizado é importante?",
            alternativas: [
                "A) Porque acompanha tendências",
                "B) Para melhorar a agilidade do computador",
                "C) Porque não é prático",
                "D) É irrelevante"
            ],
            correta: "B",
            feedback: "A resposta está correta, pois quanto maior o espaço utilizado no computador, mais lento ele será. Nesse sentido, desinstalar um software que não está mais sendo utilizado torna o computador mais rápido."
        },
        {
            numero: 6,
            enunciado: "Considerando a possibilidade de desinstalar um software ou programa de um computador, passos específicos devem ser seguidos. Quais são esses passos?",
            alternativas: [
                "A) Painel de Controle –> Desinstalar Programas",
                "B) Pesquisar o Programa -> Desinstalar Programas",
                "C) Pesquisar o Programa –> Programas -> Programas e Recursos",
                "D) Painel de Controle -> Programas -> Programas e Recursos"
            ],
            correta: "D",
            feedback: "A resposta está correta, pois, para desinstalar um programa, deve-se acessar o painel de controle. Assim, a ordem correta é Painel de Controle – Programas – Programas e Recursos e só então o programa pode ser escolhido e desinstalado."
        },
        {
            numero: 7,
            enunciado: "No aplicativo Windows Media Player existe uma opção de gerenciar bibliotecas. O que essa função permite fazer? Assinale a alternativa que responde o questionamento.",
            alternativas: [
                "A) Adicionar pastas às bibliotecas",
                "B) Ordenar mídias",
                "C) Agrupar mídias",
                "D) Agrupar bibliotecas"
            ],
            correta: "A",
            feedback: "A resposta está correta, pois a função de gerenciar bibliotecas permite adicionar ou remover pastas das bibliotecas."
        },
        {
            numero: 8,
            enunciado: "O Windows Media Player é um aplicativo que permite que funções relacionadas a mídias sejam realizadas. Nesse contexto, qual a principal funcionalidade do Windows Media Player?",
            alternativas: [
                "A) Editor de imagens",
                "B) Reprodutor de mídias",
                "C) Editor de vídeos",
                "D) Reprodutor de músicas"
            ],
            correta: "B",
            feedback: "A resposta está correta, pois o Windows Media Player é um reprodutor de mídias, ou seja, de músicas, fotos ou vídeos."
        }
    ],
    [ 
        //avaliação aula 8------------------------------------------------------------------------------
    ],
    [ 
        //avaliação aula 9------------------------------------------------------------------------------
    ],
    [ 
        //avaliação aula 10------------------------------------------------------------------------------
    ],
    [ 
        //avaliação aula 11------------------------------------------------------------------------------
    ],
    [ 
        //avaliação aula 12------------------------------------------------------------------------------
    ],
    [ 
        //avaliação aula 13------------------------------------------------------------------------------
    ],
    [ 
        //avaliação aula 14------------------------------------------------------------------------------
    ],
    [ 
        //avaliação aula 15------------------------------------------------------------------------------
    ],
    [ 
        //avaliação aula 16------------------------------------------------------------------------------
    ],
];

// Modal das avaliações
winAvaliacao.forEach((element, index) => {
    element.addEventListener('click', () => {
        abrirPopup(index); // Abre o modal com as questões correspondentes
    });
});

// Função para abrir o pop-up
function abrirPopup(index) {
    const questoes = JSON.stringify(avaliacoes[index]); // Passa as questões da avaliação selecionada
    const popup = window.open('', 'Popup', 'width=960,height=500');
    popup.document.write(`
        <html>
        <head>
            <title>Avaliação</title>
            <style>
                body {
                    margin: 0 50px;    
                    font-family: 'Poppins', sans-serif;
                    margin: 20px;
                    background-color: #252e3d;
                    color: #fff;
                    transition: all 250ms;
                }
                
                h2 {
                    text-align: center;
                }
                
                .questao {
                    margin-bottom: 20px;
                }

                button {
                    margin-top: 10px;
                    display: block;
                }

                #finalizar {
                    background-color: #29af55;
                    color: white;
                    border: none;
                    padding: 10px;
                    cursor: pointer;
                }

                #finalizar:hover {
                    background-color:rgb(24, 129, 59);
                }

                #progresso {
                    margin-top: 20px;
                    text-align: center;
                    font-size: 1.2em;
                }

                form > label{
                    cursor: pointer;
                }

                form > label:hover{
                    color: #fec600;
                }

                .questao-title{
                    margin: 10px 0;
                    border-radius: 5px;
                }

            </style>
        </head>
        <body>
            <h2 class="avaliacao-title">Windows 11 - Avaliação: Aula ${index + 6}</h2>
            <div id="avaliacao-container"></div>
            <button id="finalizar">FINALIZAR AVALIAÇÃO</button>
            <div id="progresso"></div>
            <script>
                const questoes = ${questoes};
                const container = document.getElementById('avaliacao-container');
                const finalizarBtn = document.getElementById('finalizar');
                let acertos = 0;

                // Exibe as questões
                questoes.forEach((q, i) => {
                    let questaoHTML = \`
                        <div class="questao">
                            <div class="questao-title">
                                <h3>Questão \${q.numero}</h3>
                                <p>\${q.enunciado}</p>
                            </div>
                            <form id="form-\${i}">
                                <label><input type="radio" name="q\${i}" value="A"> \${q.alternativas[0]}</label><br>
                                <label><input type="radio" name="q\${i}" value="B"> \${q.alternativas[1]}</label><br>
                                <label><input type="radio" name="q\${i}" value="C"> \${q.alternativas[2]}</label><br>
                                <label><input type="radio" name="q\${i}" value="D"> \${q.alternativas[3]}</label><br>
                            </form>
                        </div>
                    \`;
                    container.insertAdjacentHTML('beforeend', questaoHTML);
                });

                // Finaliza e calcula o progresso
                finalizarBtn.addEventListener('click', () => {
                    acertos = 0; // Zera contagem
                    let todasRespondidas = true; // Variável para verificar se todas as questões foram respondidas

                    questoes.forEach((q, i) => {
                        const form = document.getElementById('form-' + i);
                        const resposta = form.querySelector('input[name="q' + i + '"]:checked');
                        const labels = form.querySelectorAll('label');

                        // Reseta cores antes de aplicar as novas
                        labels.forEach(label => {
                            label.style.color = ''; // Remove estilos antigos
                        });

                        if (resposta) {
                            labels.forEach(label => {
                                const input = label.querySelector('input');
                                if (input.value === q.correta) {
                                    // Alternativa correta em verde
                                    label.style.color = 'green';
                                } else if (input.checked) {
                                    // Alternativa incorreta selecionada em vermelho
                                    label.style.color = 'red';
                                }
                            });

                            if (resposta.value === q.correta) {
                                acertos++;
                            }
                        } else {
                            // Caso nenhuma alternativa seja selecionada
                            todasRespondidas = false; // Marca que nem todas as questões foram respondidas
                            labels.forEach(label => {
                                label.style.color = 'red';
                            });
                        }
                    });

                    if (!todasRespondidas) {
                        // Exibe o modal com uma mensagem de erro se nem todas as questões forem respondidas
                        if (!document.getElementById('feedback-modal')) {
                            document.body.insertAdjacentHTML('beforeend', \`
                                <div id="feedback-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 9999; justify-content: center; align-items: center; color: white; font-family: Arial, sans-serif;">
                                    <div style="background: #333; padding: 20px; border-radius: 8px; text-align: center; max-width: 400px; width: 90%;">
                                        <h2 id="modal-title" style="margin-bottom: 10px;"></h2>
                                        <p id="modal-message" style="margin-bottom: 20px;"></p>
                                        <button id="modal-close" style="background: #29af55; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Fechar</button>
                                    </div>
                                </div>
                            \`);
                        }

                        const feedbackModal = document.getElementById('feedback-modal');
                        const modalTitle = document.getElementById('modal-title');
                        const modalMessage = document.getElementById('modal-message');
                        const modalClose = document.getElementById('modal-close');

                        modalTitle.innerText = 'Atenção!';
                        modalMessage.innerText = 'Você deve responder todas as questões antes de finalizar o questionário.';

                        modalClose.addEventListener('click', () => {
                            feedbackModal.style.display = 'none';
                        });

                        feedbackModal.style.display = 'flex';
                        return; // Interrompe a execução para impedir a exibição do resultado
                    }

                    const percentual = ((acertos / questoes.length) * 100).toFixed(0);
                    document.getElementById('progresso').innerHTML = \`Você acertou \${acertos} de \${questoes.length} questões (\${percentual}%)\`;

                    // Adiciona o modal ao corpo do documento, se ainda não estiver lá
                    if (!document.getElementById('feedback-modal')) {
                        document.body.insertAdjacentHTML('beforeend', \`
                            <div id="feedback-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 9999; justify-content: center; align-items: center; color: white; font-family: Arial, sans-serif;">
                                <div style="background: #333; padding: 20px; border-radius: 8px; text-align: center; max-width: 400px; width: 90%;">
                                    <h2 id="modal-title" style="margin-bottom: 10px;"></h2>
                                    <p id="modal-message" style="margin-bottom: 20px;"></p>
                                    <div style="display: flex; justify-content: center; gap: 10px;">
                                        <button id="modal-close" style="background: #29af55; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Fechar</button>
                                        <button id="modal-retry" style="background: #ff9800; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Tentar Novamente</button>
                                    </div>
                                </div>
                            </div>
                        \`);
                    }

                    // Configura o modal
                    const feedbackModal = document.getElementById('feedback-modal');
                    const modalTitle = document.getElementById('modal-title');
                    const modalMessage = document.getElementById('modal-message');
                    const modalClose = document.getElementById('modal-close');
                    const modalRetry = document.getElementById('modal-retry');

                    modalClose.addEventListener('click', () => {
                        feedbackModal.style.display = 'none';
                    });

                    modalRetry.addEventListener('click', () => {
                        // Reseta as questões
                        questoes.forEach((q, i) => {
                            const form = document.getElementById('form-' + i);
                            const labels = form.querySelectorAll('label');
                            const inputs = form.querySelectorAll('input');

                            // Limpa seleção e cores
                            inputs.forEach(input => input.checked = false);
                            labels.forEach(label => label.style.color = '');
                        });

                        // Oculta o modal
                        feedbackModal.style.display = 'none';

                        // Reseta o progresso
                        document.getElementById('progresso').innerHTML = 'Responda todas as questões para ver o resultado.';
                    });

                    // Exibe o modal com base no desempenho
                    if (percentual >= 70) {
                        modalTitle.innerText = 'Parabéns!';
                        modalMessage.innerText = \`Você acertou \${percentual}% das questões. Excelente trabalho!\`;
                    } else {
                        modalTitle.innerText = 'Tente Novamente';
                        modalMessage.innerText = \`Você acertou apenas \${percentual}% das questões. Continue praticando!\`;
                    }

                    feedbackModal.style.display = 'flex';
                });

            </script>
        </body>
        </html>
    `);
}

let inicioBtn = document.querySelectorAll('.inicio');
inicioBtn.forEach((btn)=>{
    btn.addEventListener('click', ()=>{
        window.location.href = '../index.html'
    });
});

let userName = document.querySelectorAll('.userName');
userName.forEach((userName)=>{
    userName.innerHTML = `Aluno: Dev David Silva`;
});
