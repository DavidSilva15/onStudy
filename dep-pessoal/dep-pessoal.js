let depPessoalAula = document.querySelectorAll('.depPessoal-aula');
let depPessoalAtv = document.querySelectorAll('.depPessoal-atv');
let depPessoalAvaliacao = document.querySelectorAll('.depPessoal-avaliacao');

export const depPessoalDetails = {
    videoLink: [
        '../videos/dep-pessoal/aula6/aula6.mp4',
        '../videos/dep-pessoal/aula7/aula7.mp4',
        '../videos/dep-pessoal/aula8/aula8.mp4',
        '../videos/dep-pessoal/aula9/aula9.mp4',
        //'../videos/dep-pessoal/aula10/aula10.mp4',
        //'../videos/dep-pessoal/aula11/aula11.mp4',
        //'../videos/dep-pessoal/aula12/aula12.mp4',
        //'../videos/dep-pessoal/aula13/aula13mp4',
        //'../videos/dep-pessoal/aula14/aula14.mp4',
        //'../videos/dep-pessoal/aula15/aula15.mp4',
        //'../videos/dep-pessoal/aula16/aula16.mp4'
    ],
    pratica: [
        [
            '../videos/dep-pessoal/aula6/aula6/1.png',
            '../videos/dep-pessoal/aula6/aula6/2.png',
            '../videos/dep-pessoal/aula6/aula6/3.png',
            '../videos/dep-pessoal/aula6/aula6/4.png',
            '../videos/dep-pessoal/aula6/aula6/5.png',
            '../videos/dep-pessoal/aula6/aula6/6.png',
            '../videos/dep-pessoal/aula6/aula6/7.png',
            '../videos/dep-pessoal/aula6/aula6/8.png',
            '../videos/dep-pessoal/aula6/aula6/9.png',
            '../videos/dep-pessoal/aula6/aula6/10.png',
            '../videos/dep-pessoal/aula6/aula6/11.png',
            '../videos/dep-pessoal/aula6/aula6/12.png',
            '../videos/dep-pessoal/aula6/aula6/13.png',
            '../videos/dep-pessoal/aula6/aula6/14.png',
            '../videos/dep-pessoal/aula6/aula6/15.png',
            '../videos/dep-pessoal/aula6/aula6/16.png',
            '../videos/dep-pessoal/aula6/aula6/17.png',
            '../videos/dep-pessoal/aula6/aula6/18.png',
            '../videos/dep-pessoal/aula6/aula6/19.png',
            '../videos/dep-pessoal/aula6/aula6/20.png'
        ],
        [
            '../videos/dep-pessoal/aula7/aula7/1.png',
            '../videos/dep-pessoal/aula7/aula7/2.png',
            '../videos/dep-pessoal/aula7/aula7/3.png',
            '../videos/dep-pessoal/aula7/aula7/4.png',
            '../videos/dep-pessoal/aula7/aula7/5.png',
            '../videos/dep-pessoal/aula7/aula7/6.png',
            '../videos/dep-pessoal/aula7/aula7/7.png',
            '../videos/dep-pessoal/aula7/aula7/8.png',
            '../videos/dep-pessoal/aula7/aula7/9.png',
            '../videos/dep-pessoal/aula7/aula7/10.png',
            '../videos/dep-pessoal/aula7/aula7/11.png',
            '../videos/dep-pessoal/aula7/aula7/12.png',
            '../videos/dep-pessoal/aula7/aula7/13.png',
            '../videos/dep-pessoal/aula7/aula7/14.png',
            '../videos/dep-pessoal/aula7/aula7/15.png',
            '../videos/dep-pessoal/aula7/aula7/16.png',
            '../videos/dep-pessoal/aula7/aula7/17.png',
            '../videos/dep-pessoal/aula7/aula7/18.png',
            '../videos/dep-pessoal/aula7/aula7/19.png',
            '../videos/dep-pessoal/aula7/aula7/20.png',
            '../videos/dep-pessoal/aula7/aula7/21.png',
            '../videos/dep-pessoal/aula7/aula7/22.png',
            '../videos/dep-pessoal/aula7/aula7/23.png',
            '../videos/dep-pessoal/aula7/aula7/24.png',
            '../videos/dep-pessoal/aula7/aula7/25.png',
            '../videos/dep-pessoal/aula7/aula7/26.png',
            '../videos/dep-pessoal/aula7/aula7/27.png',
            '../videos/dep-pessoal/aula7/aula7/28.png',
            '../videos/dep-pessoal/aula7/aula7/29.png',
            '../videos/dep-pessoal/aula7/aula7/30.png',
            '../videos/dep-pessoal/aula7/aula7/31.png',
            '../videos/dep-pessoal/aula7/aula7/32.png',
            '../videos/dep-pessoal/aula7/aula7/33.png',
            '../videos/dep-pessoal/aula7/aula7/34.png',
            '../videos/dep-pessoal/aula7/aula7/35.png',
            '../videos/dep-pessoal/aula7/aula7/36.png',
            '../videos/dep-pessoal/aula7/aula7/37.png',
            '../videos/dep-pessoal/aula7/aula7/38.png',
            '../videos/dep-pessoal/aula7/aula7/39.png',
            '../videos/dep-pessoal/aula7/aula7/40.png',
            '../videos/dep-pessoal/aula7/aula7/41.png',
            '../videos/dep-pessoal/aula7/aula7/42.png',
            '../videos/dep-pessoal/aula7/aula7/43.png',
            '../videos/dep-pessoal/aula7/aula7/44.png',
            '../videos/dep-pessoal/aula7/aula7/45.png',
            '../videos/dep-pessoal/aula7/aula7/46.png',
            '../videos/dep-pessoal/aula7/aula7/47.png',
            '../videos/dep-pessoal/aula7/aula7/48.png',
            '../videos/dep-pessoal/aula7/aula7/49.png',
            '../videos/dep-pessoal/aula7/aula7/50.png',
            '../videos/dep-pessoal/aula7/aula7/51.png',
            '../videos/dep-pessoal/aula7/aula7/52.png',
            '../videos/dep-pessoal/aula7/aula7/53.png',
            '../videos/dep-pessoal/aula7/aula7/54.png',
            '../videos/dep-pessoal/aula7/aula7/55.png',
            '../videos/dep-pessoal/aula7/aula7/56.png',
            '../videos/dep-pessoal/aula7/aula7/57.png',
            '../videos/dep-pessoal/aula7/aula7/58.png',
            '../videos/dep-pessoal/aula7/aula7/59.png',
            '../videos/dep-pessoal/aula7/aula7/60.png',
            '../videos/dep-pessoal/aula7/aula7/61.png',
            '../videos/dep-pessoal/aula7/aula7/62.png',
            '../videos/dep-pessoal/aula7/aula7/63.png',
            '../videos/dep-pessoal/aula7/aula7/64.png',
            '../videos/dep-pessoal/aula7/aula7/65.png',
            '../videos/dep-pessoal/aula7/aula7/66.png',
            '../videos/dep-pessoal/aula7/aula7/67.png',
            '../videos/dep-pessoal/aula7/aula7/68.png',
            '../videos/dep-pessoal/aula7/aula7/69.png',
            '../videos/dep-pessoal/aula7/aula7/70.png',
            '../videos/dep-pessoal/aula7/aula7/71.png',
            '../videos/dep-pessoal/aula7/aula7/72.png',
            '../videos/dep-pessoal/aula7/aula7/73.png',
            '../videos/dep-pessoal/aula7/aula7/74.png',
            '../videos/dep-pessoal/aula7/aula7/75.png',
            '../videos/dep-pessoal/aula7/aula7/76.png',
            '../videos/dep-pessoal/aula7/aula7/77.png',
            '../videos/dep-pessoal/aula7/aula7/78.png',
            '../videos/dep-pessoal/aula7/aula7/79.png',
            '../videos/dep-pessoal/aula7/aula7/80.png',
            '../videos/dep-pessoal/aula7/aula7/81.png',
            '../videos/dep-pessoal/aula7/aula7/82.png',
            '../videos/dep-pessoal/aula7/aula7/83.png'
        ],
        [
            '../videos/dep-pessoal/aula8/aula8/1.png',
            '../videos/dep-pessoal/aula8/aula8/2.png',
            '../videos/dep-pessoal/aula8/aula8/3.png',
            '../videos/dep-pessoal/aula8/aula8/4.png',
            '../videos/dep-pessoal/aula8/aula8/5.png',
            '../videos/dep-pessoal/aula8/aula8/6.png',
            '../videos/dep-pessoal/aula8/aula8/7.png',
            '../videos/dep-pessoal/aula8/aula8/8.png',
            '../videos/dep-pessoal/aula8/aula8/9.png',
            '../videos/dep-pessoal/aula8/aula8/10.png',
            '../videos/dep-pessoal/aula8/aula8/11.png',
            '../videos/dep-pessoal/aula8/aula8/12.png',
            '../videos/dep-pessoal/aula8/aula8/13.png',
            '../videos/dep-pessoal/aula8/aula8/14.png',
            '../videos/dep-pessoal/aula8/aula8/15.png',
            '../videos/dep-pessoal/aula8/aula8/16.png',
            '../videos/dep-pessoal/aula8/aula8/17.png',
            '../videos/dep-pessoal/aula8/aula8/18.png',
            '../videos/dep-pessoal/aula8/aula8/19.png',
            '../videos/dep-pessoal/aula8/aula8/20.png',
            '../videos/dep-pessoal/aula8/aula8/21.png',
            '../videos/dep-pessoal/aula8/aula8/22.png',
            '../videos/dep-pessoal/aula8/aula8/23.png',
            '../videos/dep-pessoal/aula8/aula8/24.png',
            '../videos/dep-pessoal/aula8/aula8/25.png',
            '../videos/dep-pessoal/aula8/aula8/26.png'
        ],
        [
            '../videos/dep-pessoal/aula9/aula9/1.png',
            '../videos/dep-pessoal/aula9/aula9/2.png',
            '../videos/dep-pessoal/aula9/aula9/3.png',
            '../videos/dep-pessoal/aula9/aula9/4.png',
            '../videos/dep-pessoal/aula9/aula9/5.png',
            '../videos/dep-pessoal/aula9/aula9/6.png',
            '../videos/dep-pessoal/aula9/aula9/7.png',
            '../videos/dep-pessoal/aula9/aula9/8.png',
            '../videos/dep-pessoal/aula9/aula9/9.png',
            '../videos/dep-pessoal/aula9/aula9/10.png',
            '../videos/dep-pessoal/aula9/aula9/11.png',
            '../videos/dep-pessoal/aula9/aula9/12.png',
            '../videos/dep-pessoal/aula9/aula9/13.png',
            '../videos/dep-pessoal/aula9/aula9/14.png'
        ],
        [
            '../videos/dep-pessoal/aula10/aula10/1.png',
            '../videos/dep-pessoal/aula10/aula10/2.png',
            '../videos/dep-pessoal/aula10/aula10/3.png',
            '../videos/dep-pessoal/aula10/aula10/4.png',
            '../videos/dep-pessoal/aula10/aula10/5.png',
            '../videos/dep-pessoal/aula10/aula10/6.png',
            '../videos/dep-pessoal/aula10/aula10/7.png',
            '../videos/dep-pessoal/aula10/aula10/8.png',
            '../videos/dep-pessoal/aula10/aula10/9.png',
            '../videos/dep-pessoal/aula10/aula10/10.png',
            '../videos/dep-pessoal/aula10/aula10/11.png',
            '../videos/dep-pessoal/aula10/aula10/12.png',
            '../videos/dep-pessoal/aula10/aula10/13.png',
            '../videos/dep-pessoal/aula10/aula10/14.png',
            '../videos/dep-pessoal/aula10/aula10/15.png'
        ],
        [
            '../videos/dep-pessoal/aula11/aula11/1.png',
        ],
        [
            '../videos/dep-pessoal/aula12/aula12/1.png',
        ],
        [
            '../videos/dep-pessoal/aula13/aula13/1.png',
        ],
        [
            '../videos/dep-pessoal/aula14/aula14/1.png',
        ],
        [
            '../videos/dep-pessoal/aula15/aula15/1.png',
        ],
        [
            '../videos/dep-pessoal/aula16/aula16/1.png',
        ],
    ],
};

// Função para abrir o vídeo em uma nova janela
function abrirVideo(index) {
    const videoUrl = depPessoalDetails.videoLink[index];

    // Código HTML para a nova janela com controles personalizados
    const videoHtml = `
        <html>
        <head>
            <title>VideoAula</title>
            <!-- Link para o Font Awesome -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
            <style>
                * {
                    transition: all 250ms;
                }

                body {
                    font-family: 'Poppins', sans-serif;
                    margin: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    background-color: black;
                }

                .btnControl {
                    width: 80px;
                    height: 40px;
                    background-color: #252e3d;
                    opacity: 0.8;
                    border-radius: 5px;
                    border-style: none;
                    color: #fff;
                    cursor: pointer;
                    font-size: 20px; /* Tamanho maior para o ícone */
                }

                .btnControl:hover {
                    background-color: #25344D;
                    opacity: 1;
                }

                /* Barra de progresso e exibição de tempo lado a lado */
                .progressWrapper {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    width: 600px; /* Largura ajustada */
                }

                .progressContainer {
                    width: 50%; /* Ajustando o tamanho da barra */
                    height: 5px;
                    background-color: rgba(255, 255, 255, 0.3); /* Leve opacidade */
                    cursor: none; /* Inicialmente não manipulável */
                }

                .progressBar {
                    height: 100%;
                    width: 0;
                    background-color: #4CAF50; /* Cor da barra */
                    opacity: 0.7; /* Opacidade da barra */
                }

                /* Exibição de tempo */
                .timeDisplay {
                    color: white;
                    font-size: 16px;
                    margin-left: 10px; /* Espaço entre a barra e o tempo */
                }

                .controlWrapper {
                    display: flex;
                    justify-content: center;
                    flex-direction: column;
                    align-items: center;
                    gap: 10px;
                    margin-bottom: 10px;
                }

                .aulaControls {
                    display: flex;
                    align-items: center;
                    position: relative; /* Necessário para posicionar a notificação em relação a este contêiner */
                }

                .toast {
                    background-color: rgba(0, 0, 0, 0.7);
                    color: white;
                    padding: 10px;
                    border-radius: 5px;
                    font-size: 16px;
                    opacity: 1;
                    transition: opacity 0.5s ease-in-out;
                    z-index: 10;
                    display: inline-block;
                    position: absolute;
                    bottom: 70px;
                    width: 250px;
                }

                .toast::after {
                    content: "";
                    position: absolute;
                    top: 100%;
                    left: 50%;
                    transform: translateX(-50%);
                    border-width: 10px;
                    border-style: solid;
                    border-color: rgba(0, 0, 0, 0.7) transparent transparent transparent;
                }

            </style>
        </head>
        <body>
            <video id="videoPlayer" width="100%" height="auto">
                <source src="${videoUrl}" type="video/mp4">
                Seu navegador não suporta vídeos.
            </video>
            <div class="aulaControls" style="position: absolute; bottom: 10px; text-align: center;">
                <!-- Contêiner para o botão de controle -->
                <div class="controlWrapper">
                
                <!-- Toast Notification -->
                <div id="toast" class="toast">Clique aqui para iniciar a aula</div>
                
                <button class="btnControl" id="controlBtn" onclick="togglePlayPause()">
                        <i class="fas fa-play"></i> <!-- Ícone de play -->
                    </button>
                </div>
                
                <!-- Barra de progresso e tempo -->
                <div class="progressWrapper">
                    <!-- Barra de progresso -->
                    <div class="progressContainer" id="progressContainer">
                        <div class="progressBar" id="progressBar"></div>
                    </div>
                    <!-- Exibição de tempo -->
                    <div class="timeDisplay" id="timeDisplay">00:00 / 00:00</div>
                </div>
            </div>

            <script>
                // Função para alternar entre play e pause
                function togglePlayPause() {
                    const videoPlayer = document.getElementById('videoPlayer');
                    const controlBtn = document.getElementById('controlBtn');
                    const icon = controlBtn.querySelector('i');

                    if (videoPlayer.paused) {
                        videoPlayer.play();
                        icon.classList.remove('fa-play');
                        icon.classList.add('fa-pause'); // Troca para ícone de pausa
                    } else {
                        videoPlayer.pause();
                        icon.classList.remove('fa-pause');
                        icon.classList.add('fa-play'); // Troca para ícone de play
                    }
                }

                // Função para garantir que o tempo esteja sempre no formato 2 dígitos
                function padTime(time) {
                    return time < 10 ? '0' + time : time;
                }

                // Atualiza a barra de progresso e exibe o tempo
                const videoPlayer = document.getElementById('videoPlayer');
                const progressBar = document.getElementById('progressBar');
                const timeDisplay = document.getElementById('timeDisplay');
                const progressContainer = document.getElementById('progressContainer');

                videoPlayer.addEventListener('timeupdate', function() {
                    const currentTime = videoPlayer.currentTime;
                    const duration = videoPlayer.duration;
                    const progress = (currentTime / duration) * 100;

                    progressBar.style.width = progress + '%'; // Atualiza a largura da barra

                    // Exibe o tempo atual e total em minutos:segundos
                    const currentMinutes = Math.floor(currentTime / 60);
                    const currentSeconds = Math.floor(currentTime % 60);
                    const durationMinutes = Math.floor(duration / 60);
                    const durationSeconds = Math.floor(duration % 60);

                    const formattedCurrentTime = padTime(currentMinutes) + ':' + padTime(currentSeconds);
                    const formattedDuration = padTime(durationMinutes) + ':' + padTime(durationSeconds);

                    timeDisplay.textContent = formattedCurrentTime + ' / ' + formattedDuration;
                });

                // Função para permitir que a barra de progresso seja manipulada
                progressContainer.addEventListener('click', function(event) {
                    if (isControlEnabled) {
                        const progressWidth = progressContainer.clientWidth;
                        const clickPosition = event.offsetX;
                        const newTime = (clickPosition / progressWidth) * videoPlayer.duration;
                        videoPlayer.currentTime = newTime;
                    }
                });

                // Variável para habilitar/desabilitar a interação com a barra de progresso
                let isControlEnabled = false;

                // Função para ativar/desativar a manipulação da barra de progresso
                function enableProgressControl() {
                    isControlEnabled = !isControlEnabled;
                    if (isControlEnabled) {
                        progressContainer.style.cursor = 'pointer'; // Torna a barra manipulável
                    } else {
                        progressContainer.style.cursor = 'none'; // Desabilita a manipulação
                    }
                }

                // Detecta a combinação de teclas CTRL + SHIFT + F12
                window.addEventListener('keydown', function(event) {
                    if (event.ctrlKey && event.shiftKey && event.key === 'F12') {
                        enableProgressControl();
                    }
                });

                // Função para ocultar o toast após 5 segundos
                setTimeout(function() {
                    const toast = document.getElementById('toast');
                    toast.style.opacity = '0'; // Torna o toast invisível
                    setTimeout(function() {
                        toast.style.display = 'none'; // Remove o toast da tela
                    }, 500); // Aguarda 0.5s para a animação de opacidade terminar
                }, 5000); // Exibe o toast por 5 segundos
            </script>
        </body>
        </html>
    `;

    // Abrir nova janela e escrever o conteúdo HTML
    const videoWindow = window.open("", "VideoAula", "width=900,height=500");
    videoWindow.document.write(videoHtml);
    videoWindow.document.close(); // Garante que o conteúdo é renderizado corretamente
}

// Função para exibir o slide de imagens em uma janela externa
function exibirSlide(index) {
    const imagens = depPessoalDetails.pratica[index];
    let currentImageIndex = 0;

    // Criando o conteúdo do slide
    const slideContent = `
        <html>
            <head>
            <style>
                *{
                    transition: all 250ms;
                }
                
                body{
                    background-color: #ebebeb;
                }
            
                .btnVoltar{
                    position: absolute;
                    bottom: 50%;
                    left: 20px;
                }
                
                .btnAvancar{
                    position: absolute;
                    bottom: 50%;
                    right: 20px;
                }

                .btnAvancar,
                .btnVoltar{
                    background-color: #252e3d;
                    color: #fff;
                    width: 30px;
                    height: 30px;
                    padding: 40px;
                    border-radius: 40px;
                    border-style: none;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    box-shadow: 1px 0px 5px #000;
                    font-weight: 700;
                    font-size: 1.5em;
                }
                    
                .btnAvancar:hover,
                .btnVoltar:hover{
                    background-color: #25344D;
                    scale: 0.9;
                }

                .imgSlide{
                    border-radius: 20px;
                    clip-path: polygon(5% 5%, 95% 5%, 95% 95%, 5% 95%);
                }

            </style>
            </head>
            <body>
                <div style="text-align:center; padding:20px;">
                    <img class="imgSlide" src="${imagens[currentImageIndex]}" style="max-width:100%; max-height:600px; border: 1px solid #000;">
                    <div style="margin-top:20px;">
                        <button class="btnVoltar" onclick="alterarImagem(-1)" ><</button>
                        <button class="btnAvancar" onclick="alterarImagem(1)" >></button>
                    </div>
                </div>
            </body>
            <script>
                var imagens = ${JSON.stringify(imagens)};
                var currentImageIndex = 0;
                function alterarImagem(direcao) {
                    currentImageIndex += direcao;
                    if (currentImageIndex < 0) currentImageIndex = 0;
                    if (currentImageIndex >= imagens.length) currentImageIndex = imagens.length - 1;
                    document.querySelector('img').src = imagens[currentImageIndex];
                }
            </script>
        </html>
    `;

    // Abrindo o slide em uma nova janela
    const slideWindow = window.open("", "SlidePratica", "width=800,height=600");
    slideWindow.document.write(slideContent);
}

// Adicionando os eventos aos elementos
depPessoalAula.forEach((item, index) => {
    item.addEventListener('click', () => {
        abrirVideo(index);
    });
});

depPessoalAtv.forEach((item, index) => {
    item.addEventListener('click', () => {
        exibirSlide(index);
    });
});

document.querySelectorAll(".btnAcessar").forEach((btn, index) => {
    btn.addEventListener("click", () => {
        const cursoDetails = document.querySelectorAll(".cursoDetails")[index];

        // Adiciona ou remove a classe 'open' para animar
        if (cursoDetails.classList.contains("open")) {
            cursoDetails.classList.remove("open");

            // Para evitar problemas de layout ao usar 'display: none'
            setTimeout(() => {
                cursoDetails.style.display = "none";
            }, 300); // Tempo igual ao do transition no CSS
        } else {
            cursoDetails.style.display = "block";
            setTimeout(() => {
                cursoDetails.classList.add("open");
            }, 10); // Pequeno delay para a transição funcionar corretamente
        }
    });
});

// Lista de questões para cada avaliação
const avaliacoes = [

    // avaliação aula 6------------------------------------------------------------------------------
    [
        {
            numero: 1,
            enunciado: "Sobre o salário-família é CORRETO afirmar:",
            alternativas: [
                "A) O salário-família é devido ao segurado empregado, inclusive o doméstico.",
                "B) Salário-família será devido, mensalmente, ao segurado empregado, exceto ao doméstico, após decorrido o período de carência fixado em lei.",
                "C) O salário-família é calculado com base no salário-de-benefício.",
                "D) Quando o pai e a mãe, não divorciados, são segurados empregados ou trabalhadores avulsos, ambos têm direito ao salário-família."
            ],
            correta: "D"
        },
        {
            numero: 2,
            enunciado: "O empregado passa a ter o direito do recebimento do Salário-Família:",
            alternativas: [
                "A) A partir do mês seguinte ao da apresentação da Certidão de Nascimento do filho, estando condicionado à apresentação anual de atestado de vacinação obrigatória.",
                "B) A partir da data da apresentação da certidão de nascimento do filho, estando condicionado à apresentação anual de atestado de vacinação obrigatória.",
                "C) A partir da data da apresentação da certidão de nascimento do filho, não estando condicionado à apresentação anual de atestado de vacinação obrigatória.",
                "D) Ao completar um ano de idade e condicionado à apresentação anual de atestado de vacinação obrigatória."
            ],
            correta: "B"
        },
        {
            numero: 3,
            enunciado: "A contribuição sindical do trabalhador será descontada no mês de:",
            alternativas: [
                "A) Janeiro.",
                "B) Março.",
                "C) Fevereiro.",
                "D) Dezembro."
            ],
            correta: "B"
        },
        {
            numero: 4,
            enunciado: "Qual o significado da sigla FGTS?",
            alternativas: [
                "A) Fundo Garantidora de Tempo de Serviços.",
                "B) Fundo de Garantia por Tempo de Serviço.",
                "C) Fundo Garantidora por Tempo de Seguridade.",
                "D) Fundação Garantidora por Tempo de Seguridade."
            ],
            correta: "B"
        },
        {
            numero: 5,
            enunciado: "Qual instituição bancária administra o FGTS?",
            alternativas: [
                "A) Banco Itaú.",
                "B) Caixa Econômica Federal.",
                "C) Banco do Brasil.",
                "D) Banco Inter."
            ],
            correta: "B"
        },
        {
            numero: 6,
            enunciado: "Quem determina o valor da pensão alimentícia?",
            alternativas: [
                "A) Advogado.",
                "B) Promotor.",
                "C) Juiz.",
                "D) Defensoria Pública."
            ],
            correta: "C"
        },
        {
            numero: 7,
            enunciado: "É concedido ao trabalhador de baixa renda, em razão dos seus dependentes menores de 14 anos ou inválidos, como forma de complementar seu salário. Estamos falando exatamente de?",
            alternativas: [
                "A) Contribuição sindical.",
                "B) Pensão alimentícia.",
                "C) Benefício trabalhista.",
                "D) Salário-família."
            ],
            correta: "D"
        },
        {
            numero: 8,
            enunciado: "Como o empregador recebe a determinação para o pagamento da pensão alimentícia?",
            alternativas: [
                "A) Ofício.",
                "B) Ligação telefônica.",
                "C) E-mail.",
                "D) Carta Registrada."
            ],
            correta: "A"
        }
    ],

    // avaliação aula 7------------------------------------------------------------------------------
    [
        {
            numero: 1,
            enunciado: "A empresa é obrigada a entregar ao funcionário um documento que mostra todos os valores recebidos por ele na empresa durante o ano. Esse documento se chama:",
            alternativas: [
                "A) DECLARAÇÃO DE RECEBIMENTO.",
                "B) INFORME DE RENDIMENTOS.",
                "C) FOLHA DE SALÁRIOS.",
                "D) RECEBIMENTO DE RENDA."
            ],
            correta: "B"
        },
        {
            numero: 2,
            enunciado: "Em 2021, qual foi o valor definido para dedução do Imposto de Renda por dependente?",
            alternativas: [
                "A) R$ 189,59",
                "B) R$ 142,80",
                "C) R$ 636,13",
                "D) R$ 354,80"
            ],
            correta: "A"
        },
        {
            numero: 3,
            enunciado: "O cálculo do imposto de Renda Retido na Fonte referente às férias deve ser efetuado de que forma?",
            alternativas: [
                "A) SEPARADAMENTE DOS DEMAIS RENDIMENTOS PAGOS AO BENEFICIÁRIO.",
                "B) JUNTO DO PAGAMENTO DO DÉCIMO TERCEIRO.",
                "C) APÓS UM MÊS DO PAGAMENTO DAS FÉRIAS.",
                "D) JUNTO DO PAGAMENTO DAS FÉRIAS DE TODOS OS FUNCIONÁRIOS."
            ],
            correta: "A"
        },
        {
            numero: 4,
            enunciado: "Com relação ao décimo terceiro do IRRF, está incorreta a afirmativa:",
            alternativas: [
                "A) HAVERÁ RETENÇÃO NA FONTE PELO PAGAMENTO DE ANTECIPAÇÕES.",
                "B) PODEM SER FEITAS AS DEVIDAS DEDUÇÕES.",
                "C) OCORRERÁ A TRIBUTAÇÃO EXCLUSIVAMENTE NA FONTE SEPARADO DOS OUTROS RENDIMENTOS DOS BENEFICIÁRIOS.",
                "D) SERÁ DEVIDO SOBRE O VALOR INTEGRAL NO MÊS DA SUA QUITAÇÃO."
            ],
            correta: "A"
        },
        {
            numero: 5,
            enunciado: "O cálculo referente ao Imposto de Renda Retido na Fonte descontado do funcionário é de responsabilidade da:",
            alternativas: [
                "A) RECEITA FEDERAL.",
                "B) POLÍCIA FEDERAL.",
                "C) EMPRESA.",
                "D) OUVIDORIA."
            ],
            correta: "C"
        },
        {
            numero: 6,
            enunciado: "Para chegar na base de cálculo do Imposto de Renda Retido na Fonte com relação ao salário, é preciso:",
            alternativas: [
                "A) SOMAR O PAGAMENTO E DESCONTA-SE O INSS.",
                "B) SOMAR O PAGAMENTO E DESCONTA-SE OS BENEFÍCIOS SOCIAIS.",
                "C) SOMAR O PAGAMENTO E DESCONTA-SE O FGTS.",
                "D) SOMAR O PAGAMENTO E DESCONTA-SE AS FÉRIAS."
            ],
            correta: "A"
        },
        {
            numero: 7,
            enunciado: "O percentual que consta na Tabela do Imposto de Renda é:",
            alternativas: [
                "A) VARIÁVEL A CADA MÊS.",
                "B) ACOMPANHA OS ÍNDICES DE INFLAÇÃO.",
                "C) DE ACORDO COM A TABELA D IGPC.",
                "D) AJUSTADO E PUBLICADO A CADA ANO."
            ],
            correta: "D"
        },
        {
            numero: 8,
            enunciado: "Podemos considerar como dependente quando falamos de IRRF:",
            alternativas: [
                "A) PRIMO(A).",
                "B) TIO(A).",
                "C) CÔNJUGE.",
                "D) CUNHADO(A)."
            ],
            correta: "C"
        }
    ],

    // avaliação aula 8------------------------------------------------------------------------------
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
    [
        // Questões indisponíveis para essa aula...
    ],
];

// Modal das avaliações
depPessoalAvaliacao.forEach((element, index) => {
    element.addEventListener('click', () => {
        abrirPopup(index); // Abre o modal com as questões correspondentes
    });
});

// Função para abrir o pop-up
function abrirPopup(index) {
    const questoes = JSON.stringify(avaliacoes[index]); // Passa as questões da avaliação selecionada
    const popup = window.open('', 'Popup', 'width=960,height=500');
    popup.document.write(`
        <html>
        <head>
            <title>Avaliação</title>
            <style>
                body {
                    margin: 0 50px;    
                    font-family: 'Poppins', sans-serif;
                    margin: 20px;
                    background-color: #252e3d;
                    color: #fff;
                    transition: all 250ms;
                }
                
                h2 {
                    text-align: center;
                }
                
                .questao {
                    margin-bottom: 20px;
                }

                button {
                    margin-top: 10px;
                    display: block;
                }

                #finalizar {
                    background-color: #29af55;
                    color: white;
                    border: none;
                    padding: 10px;
                    cursor: pointer;
                }

                #finalizar:hover {
                    background-color:rgb(24, 129, 59);
                }

                #progresso {
                    margin-top: 20px;
                    text-align: center;
                    font-size: 1.2em;
                }

                form > label{
                    cursor: pointer;
                }

                form > label:hover{
                    color: #fec600;
                }

                .questao-title{
                    margin: 10px 0;
                    border-radius: 5px;
                }

            </style>
        </head>
        <body>
            <h2 class="avaliacao-title">Departamento Pessoal - Avaliação: Aula ${index + 6}</h2>
            <div id="avaliacao-container"></div>
            <button id="finalizar">FINALIZAR AVALIAÇÃO</button>
            <div id="progresso"></div>
            <script>
                const questoes = ${questoes};
                const container = document.getElementById('avaliacao-container');
                const finalizarBtn = document.getElementById('finalizar');
                let acertos = 0;

                // Exibe as questões
                questoes.forEach((q, i) => {
                    let questaoHTML = \`
                        <div class="questao">
                            <div class="questao-title">
                                <h3>Questão \${q.numero}</h3>
                                <p>\${q.enunciado}</p>
                            </div>
                            <form id="form-\${i}">
                                <label><input type="radio" name="q\${i}" value="A"> \${q.alternativas[0]}</label><br>
                                <label><input type="radio" name="q\${i}" value="B"> \${q.alternativas[1]}</label><br>
                                <label><input type="radio" name="q\${i}" value="C"> \${q.alternativas[2]}</label><br>
                                <label><input type="radio" name="q\${i}" value="D"> \${q.alternativas[3]}</label><br>
                            </form>
                        </div>
                    \`;
                    container.insertAdjacentHTML('beforeend', questaoHTML);
                });

                // Finaliza e calcula o progresso
                finalizarBtn.addEventListener('click', () => {
                    acertos = 0; // Zera contagem
                    let todasRespondidas = true; // Variável para verificar se todas as questões foram respondidas

                    questoes.forEach((q, i) => {
                        const form = document.getElementById('form-' + i);
                        const resposta = form.querySelector('input[name="q' + i + '"]:checked');
                        const labels = form.querySelectorAll('label');

                        // Reseta cores antes de aplicar as novas
                        labels.forEach(label => {
                            label.style.color = ''; // Remove estilos antigos
                        });

                        if (resposta) {
                            labels.forEach(label => {
                                const input = label.querySelector('input');
                                if (input.value === q.correta) {
                                    // Alternativa correta em verde
                                    label.style.color = 'green';
                                } else if (input.checked) {
                                    // Alternativa incorreta selecionada em vermelho
                                    label.style.color = 'red';
                                }
                            });

                            if (resposta.value === q.correta) {
                                acertos++;
                            }
                        } else {
                            // Caso nenhuma alternativa seja selecionada
                            todasRespondidas = false; // Marca que nem todas as questões foram respondidas
                            labels.forEach(label => {
                                label.style.color = 'red';
                            });
                        }
                    });

                    if (!todasRespondidas) {
                        // Exibe o modal com uma mensagem de erro se nem todas as questões forem respondidas
                        if (!document.getElementById('feedback-modal')) {
                            document.body.insertAdjacentHTML('beforeend', \`
                                <div id="feedback-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 9999; justify-content: center; align-items: center; color: white; font-family: Arial, sans-serif;">
                                    <div style="background: #333; padding: 20px; border-radius: 8px; text-align: center; max-width: 400px; width: 90%;">
                                        <h2 id="modal-title" style="margin-bottom: 10px;"></h2>
                                        <p id="modal-message" style="margin-bottom: 20px;"></p>
                                        <button id="modal-close" style="background: #29af55; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Fechar</button>
                                    </div>
                                </div>
                            \`);
                        }

                        const feedbackModal = document.getElementById('feedback-modal');
                        const modalTitle = document.getElementById('modal-title');
                        const modalMessage = document.getElementById('modal-message');
                        const modalClose = document.getElementById('modal-close');

                        modalTitle.innerText = 'Atenção!';
                        modalMessage.innerText = 'Você deve responder todas as questões antes de finalizar o questionário.';

                        modalClose.addEventListener('click', () => {
                            feedbackModal.style.display = 'none';
                        });

                        feedbackModal.style.display = 'flex';
                        return; // Interrompe a execução para impedir a exibição do resultado
                    }

                    const percentual = ((acertos / questoes.length) * 100).toFixed(0);
                    document.getElementById('progresso').innerHTML = \`Você acertou \${acertos} de \${questoes.length} questões (\${percentual}%)\`;

                    // Adiciona o modal ao corpo do documento, se ainda não estiver lá
                    if (!document.getElementById('feedback-modal')) {
                        document.body.insertAdjacentHTML('beforeend', \`
                            <div id="feedback-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 9999; justify-content: center; align-items: center; color: white; font-family: Arial, sans-serif;">
                                <div style="background: #333; padding: 20px; border-radius: 8px; text-align: center; max-width: 400px; width: 90%;">
                                    <h2 id="modal-title" style="margin-bottom: 10px;"></h2>
                                    <p id="modal-message" style="margin-bottom: 20px;"></p>
                                    <div style="display: flex; justify-content: center; gap: 10px;">
                                        <button id="modal-close" style="background: #29af55; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Fechar</button>
                                        <button id="modal-retry" style="background: #ff9800; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Tentar Novamente</button>
                                    </div>
                                </div>
                            </div>
                        \`);
                    }

                    // Configura o modal
                    const feedbackModal = document.getElementById('feedback-modal');
                    const modalTitle = document.getElementById('modal-title');
                    const modalMessage = document.getElementById('modal-message');
                    const modalClose = document.getElementById('modal-close');
                    const modalRetry = document.getElementById('modal-retry');

                    modalClose.addEventListener('click', () => {
                        feedbackModal.style.display = 'none';
                    });

                    modalRetry.addEventListener('click', () => {
                        // Reseta as questões
                        questoes.forEach((q, i) => {
                            const form = document.getElementById('form-' + i);
                            const labels = form.querySelectorAll('label');
                            const inputs = form.querySelectorAll('input');

                            // Limpa seleção e cores
                            inputs.forEach(input => input.checked = false);
                            labels.forEach(label => label.style.color = '');
                        });

                        // Oculta o modal
                        feedbackModal.style.display = 'none';

                        // Reseta o progresso
                        document.getElementById('progresso').innerHTML = 'Responda todas as questões para ver o resultado.';
                    });

                    // Exibe o modal com base no desempenho
                    if (percentual >= 70) {
                        modalTitle.innerText = 'Parabéns!';
                        modalMessage.innerText = \`Você acertou \${percentual}% das questões. Excelente trabalho!\`;
                    } else {
                        modalTitle.innerText = 'Tente Novamente';
                        modalMessage.innerText = \`Você acertou apenas \${percentual}% das questões. Continue praticando!\`;
                    }

                    feedbackModal.style.display = 'flex';
                });

            </script>
        </body>
        </html>
    `);
}

let inicioBtn = document.querySelectorAll('.inicio');
inicioBtn.forEach((btn)=>{
    btn.addEventListener('click', ()=>{
        window.location.href = '../home.html'
    });
});

let userName = document.querySelectorAll('.userName');
userName.forEach((userName)=>{
    userName.innerHTML = `Aluno: Dev David Silva`;
});